pipeline {
  agent none
  stages {
    stage('build') {
      parallel {
        stage('New World') {
          agent {label 'New World'}
          steps {
            sh 'go install dpctl'
          }
        }
        stage('First World') {
          agent {label 'First World'}
          steps {
            sh 'go install dpctl'
          }
        }
        stage('Final World') {
          agent {label 'Final World'}
          steps {
            sh 'go install dpctl'
          }
        }
      }
    }
    stage('run') {
      parallel {
        stage('New World') {
          agent {label 'New World'}
          steps {
            sh 'dpctl'
          }
        }
        stage('First World') {
          agent {label 'First World'}
          steps {
            sh 'dpctl'
          }
        }
        stage('Final World') {
          agent {label 'Final World'}
          steps {
            sh 'dpctl'
          }
        }
      }
    }
  }
}
